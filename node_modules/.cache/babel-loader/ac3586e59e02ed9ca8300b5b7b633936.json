{"ast":null,"code":"import _Drawer from \"antd/es/drawer\";\nimport _Menu from \"antd/es/menu\";\nimport _Layout from \"antd/es/layout\";\nvar _jsxFileName = \"/home/ad3sh/Documents/Aid Donation/client/src/components/home.jsx\";\nimport React from 'react';\nimport { MenuOutlined } from '@ant-design/icons';\nimport { UserOutlined, SoundOutlined, ForkOutlined, FileSearchOutlined, DollarOutlined, HomeOutlined } from '@ant-design/icons';\nimport Authority from './authority';\nimport Register from './register';\nimport Landing from './landing';\nimport Tree from './tree';\nimport Track from './track';\nimport Campaign from './campaign';\nimport RootAuth from './rootAuth';\nimport MidAuth from './midAuth';\nimport Paaradarshak from \"../contracts/paardarshak.json\";\nimport { GithubOutlined } from '@ant-design/icons';\nimport './home.scss';\nconst {\n  Header,\n  Content\n} = _Layout;\nconst AppMenuMapper = [{\n  key: '0',\n  value: 'Home',\n  icon: /*#__PURE__*/React.createElement(HomeOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 38\n    }\n  })\n}, {\n  key: '2',\n  value: 'Pay',\n  icon: /*#__PURE__*/React.createElement(SoundOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 37\n    }\n  })\n}, {\n  key: '3',\n  value: 'Audit',\n  icon: /*#__PURE__*/React.createElement(ForkOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 39\n    }\n  })\n}, {\n  key: '4',\n  value: 'Track',\n  icon: /*#__PURE__*/React.createElement(FileSearchOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 39\n    }\n  })\n}, {\n  key: '1',\n  value: 'Authority',\n  icon: /*#__PURE__*/React.createElement(UserOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 43\n    }\n  })\n}];\nconst LandingMenuMapper = [{\n  key: '7',\n  value: 'Docs',\n  link: 'https://www.canva.com/design/DAEAXmeL4A8/Pi9R-fenNHZpV5ns7kStGA/view?utm_content=DAEAXmeL4A8&utm_campaign=designshare&utm_medium=link&utm_source=sharebutton#1'\n}, {\n  key: '8',\n  value: 'View on Github',\n  link: 'https://github.com/abhishekvispute/paaradarshak-chainrunner'\n}];\nlet labels = [];\nlet mapAuthAddresstoName = {};\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleToggleDrawer = bool => {\n      this.setState({\n        drawerVisible: bool\n      });\n    };\n\n    this.handleChangeMenu = key => {\n      this.handleToggleDrawer(false);\n      this.setState({\n        selectedMenuItem: key\n      });\n      if (key == '0') this.setState({\n        campaignName: ''\n      });\n    };\n\n    this.liveCampClicked = (name, owner) => {\n      this.setState({\n        selectedMenuItem: '2',\n        campaignName: name,\n        drawerVisible: false\n      });\n      console.log(this.props.web3);\n      const w = this.props.web3.web3;\n      const instance = new w.eth.Contract(Paaradarshak.abi, owner);\n      this.props.web3.contract = instance;\n      this.setState({\n        contract: instance\n      });\n      this.setState({\n        isRootAuth: false\n      });\n      this.setState({\n        isMidAuth: false\n      });\n      this.setState({\n        isNoAuth: false\n      });\n      this.call();\n    };\n\n    this.state = {\n      midAuthName: 'MidAuthName',\n      accounts: [],\n      campaignName: '',\n      isNoAuth: false,\n      isRootAuth: false,\n      isMidAuth: false,\n      drawerVisible: false,\n      selectedMenuItem: '0',\n      selectedPage: /*#__PURE__*/React.createElement(Landing, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 197\n        }\n      }),\n      contract: \"\"\n    };\n  } // componentDidUpdate(prevProps) {\n  //     if (prevProps.changedProp !== this.props.changedProp) {\n  //         this.setState({\n  //             changedProp: this.props.changedProp\n  //         });\n  //     }\n  // }\n\n\n  componentDidMount() {\n    this.setState({\n      accounts: this.props.web3.accounts\n    });\n    window.ethereum.on('accountsChanged', acc => {\n      this.setState({\n        accounts: acc\n      });\n      this.setState({\n        isRootAuth: false\n      });\n      this.setState({\n        isMidAuth: false\n      });\n      this.setState({\n        isNoAuth: false\n      });\n\n      if (this.props.web3.contract != null) {\n        this.call();\n      }\n    });\n  }\n\n  call() {\n    labels = [];\n    mapAuthAddresstoName = {};\n    const {\n      contract\n    } = this.props.web3;\n    console.log(contract);\n    contract.methods.getAllListedAuthAddress().call({\n      from: this.state.accounts[0],\n      gas: 3000000\n    }).then(result => {\n      let i;\n      console.log(result);\n      let promises = [];\n\n      for (i = 0; i < result.length; i++) {\n        let temp = result[i];\n        let add = this.state.accounts[0];\n        promises.push(new Promise(function (resolve, reject) {\n          console.log(temp);\n          contract.methods.getSingleAuthDetails(temp).call({\n            from: add,\n            gas: 3000000\n          }).then(r => {\n            console.log(r);\n            labels.push({\n              'value': r['name']\n            });\n            mapAuthAddresstoName[temp.toLowerCase()] = r['name'];\n          }).then(() => {\n            resolve();\n          });\n        }));\n      }\n\n      Promise.all(promises).then(() => {\n        console.log(this.state.accounts[0].toLowerCase());\n        console.log(mapAuthAddresstoName);\n\n        if (mapAuthAddresstoName[this.state.accounts[0].toLowerCase()] == 'Root') {\n          this.setState({\n            isRootAuth: true\n          });\n        } else if (mapAuthAddresstoName.hasOwnProperty(this.state.accounts[0].toLowerCase())) {\n          console.log('midauth');\n          this.setState({\n            isMidAuth: true\n          });\n          this.setState({\n            midAuthName: mapAuthAddresstoName[this.state.accounts[0].toLowerCase()]\n          });\n        } else {\n          this.setState({\n            isNoAuth: true\n          });\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(_Layout, {\n      className: \"home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MenuOutlined, {\n      className: \"menu-unfold\",\n      type: \"default\",\n      onClick: () => this.handleToggleDrawer(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    }, this.state.campaignName != '' ? this.state.campaignName : 'Paaradarshak'), /*#__PURE__*/React.createElement(_Menu, {\n      className: \"desktop-menu\",\n      theme: \"dark\",\n      mode: \"horizontal\",\n      selectedKeys: [this.state.selectedMenuItem],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, this.state.selectedMenuItem !== '0' ? AppMenuMapper.map(obj => {\n      if (parseInt(obj.key) < 5 && parseInt(obj.key) != 1) return /*#__PURE__*/React.createElement(_Menu.Item, {\n        onClick: () => this.handleChangeMenu(obj.key),\n        key: obj.key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 40\n        }\n      }, obj.value);else if (parseInt(obj.key) == 1 && !this.state.isNoAuth) return /*#__PURE__*/React.createElement(_Menu.Item, {\n        onClick: () => this.handleChangeMenu(obj.key),\n        key: obj.key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 40\n        }\n      }, obj.value);\n    }) : LandingMenuMapper.map(obj => {\n      return /*#__PURE__*/React.createElement(_Menu.Item, {\n        key: obj.key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 40\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        target: \"_blank\",\n        href: obj.link,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 65\n        }\n      }, obj.value));\n    }))), /*#__PURE__*/React.createElement(_Drawer, {\n      title: \"Welcome, User\",\n      placement: \"left\",\n      closable: true,\n      onClose: () => this.handleToggleDrawer(false),\n      visible: this.state.drawerVisible,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Menu, {\n      style: {\n        width: 256\n      },\n      selectedKeys: [this.state.selectedMenuItem],\n      mode: \"inline\",\n      theme: \"light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, this.state.selectedMenuItem !== '0' ? AppMenuMapper.map(obj => {\n      if (parseInt(obj.key) < 5) return /*#__PURE__*/React.createElement(_Menu.Item, {\n        onClick: () => this.handleChangeMenu(obj.key),\n        key: obj.key,\n        icon: obj.icon,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 40\n        }\n      }, obj.value);else if (parseInt(obj.key) == 1 && !this.state.isNoAuth) return /*#__PURE__*/React.createElement(_Menu.Item, {\n        onClick: () => this.handleChangeMenu(obj.key),\n        key: obj.key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 40\n        }\n      }, obj.value);\n    }) : LandingMenuMapper.map(obj => {\n      return /*#__PURE__*/React.createElement(_Menu.Item, {\n        key: obj.key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 36\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        target: \"_blank\",\n        href: obj.link,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 61\n        }\n      }, obj.value));\n    }))), this.state.selectedMenuItem == '0' ? /*#__PURE__*/React.createElement(Landing, {\n      liveCampClicked: this.liveCampClicked,\n      web3: this.props.web3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 55\n      }\n    }) : this.state.selectedMenuItem == '1' && this.state.isRootAuth ? /*#__PURE__*/React.createElement(RootAuth, {\n      handleChangeMenu: this.handleChangeMenu,\n      web3: this.props.web3,\n      acc: this.state.accounts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 83\n      }\n    }) : this.state.selectedMenuItem == '1' && this.state.isMidAuth ? /*#__PURE__*/React.createElement(MidAuth, {\n      midAuthName: this.state.midAuthName,\n      web3: this.props.web3,\n      acc: this.state.accounts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 86\n      }\n    }) : this.state.selectedMenuItem == '3' ? /*#__PURE__*/React.createElement(Tree, {\n      web3: this.props.web3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 66\n      }\n    }) : this.state.selectedMenuItem == '2' ? /*#__PURE__*/React.createElement(Campaign, {\n      web3: this.props.web3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 70\n      }\n    }) : this.state.selectedMenuItem == '4' ? /*#__PURE__*/React.createElement(Track, {\n      web3: this.props.web3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 74\n      }\n    }) : this.state.selectedMenuItem == '5' ? /*#__PURE__*/React.createElement(RootAuth, {\n      web3: this.props.web3,\n      labels: this.state.labels,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 78\n      }\n    }) : this.state.selectedMenuItem == '6' ? /*#__PURE__*/React.createElement(MidAuth, {\n      web3: this.props.web3,\n      labels: this.state.labels,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 82\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 49\n      }\n    }));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/ad3sh/Documents/Aid Donation/client/src/components/home.jsx"],"names":["React","MenuOutlined","UserOutlined","SoundOutlined","ForkOutlined","FileSearchOutlined","DollarOutlined","HomeOutlined","Authority","Register","Landing","Tree","Track","Campaign","RootAuth","MidAuth","Paaradarshak","GithubOutlined","Header","Content","AppMenuMapper","key","value","icon","LandingMenuMapper","link","labels","mapAuthAddresstoName","Home","Component","constructor","props","handleToggleDrawer","bool","setState","drawerVisible","handleChangeMenu","selectedMenuItem","campaignName","liveCampClicked","name","owner","console","log","web3","w","instance","eth","Contract","abi","contract","isRootAuth","isMidAuth","isNoAuth","call","state","midAuthName","accounts","selectedPage","componentDidMount","window","ethereum","on","acc","methods","getAllListedAuthAddress","from","gas","then","result","i","promises","length","temp","add","push","Promise","resolve","reject","getSingleAuthDetails","r","toLowerCase","all","hasOwnProperty","render","map","obj","parseInt","width"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Drawer, Menu, Layout } from 'antd';\nimport { MenuOutlined } from '@ant-design/icons';\nimport { UserOutlined, SoundOutlined, ForkOutlined, FileSearchOutlined, DollarOutlined, HomeOutlined } from '@ant-design/icons';\nimport Authority from './authority';\nimport Register from './register';\nimport Landing from './landing';\nimport Tree from './tree';\nimport Track from './track';\nimport Campaign from './campaign';\nimport RootAuth from './rootAuth';\nimport MidAuth from './midAuth';\nimport Paaradarshak from \"../contracts/paardarshak.json\";\n\nimport { GithubOutlined } from '@ant-design/icons';\nimport './home.scss';\nconst { Header, Content } = Layout;\n\nconst AppMenuMapper = [\n    { key: '0', value: 'Home', icon: <HomeOutlined /> },\n    { key: '2', value: 'Pay', icon: <SoundOutlined /> },\n    { key: '3', value: 'Audit', icon: <ForkOutlined /> },\n    { key: '4', value: 'Track', icon: <FileSearchOutlined /> },\n    { key: '1', value: 'Authority', icon: <UserOutlined /> }\n]\n\nconst LandingMenuMapper = [\n    { key: '7', value: 'Docs', link: 'https://www.canva.com/design/DAEAXmeL4A8/Pi9R-fenNHZpV5ns7kStGA/view?utm_content=DAEAXmeL4A8&utm_campaign=designshare&utm_medium=link&utm_source=sharebutton#1' },\n    { key: '8', value: 'View on Github', link: 'https://github.com/abhishekvispute/paaradarshak-chainrunner' },\n]\nlet labels = [\n\n]\n\nlet mapAuthAddresstoName = {}\nclass Home extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { midAuthName: 'MidAuthName', accounts: [], campaignName: '', isNoAuth: false, isRootAuth: false, isMidAuth: false, drawerVisible: false, selectedMenuItem: '0', selectedPage: <Landing />, contract: \"\" };\n    }\n    // componentDidUpdate(prevProps) {\n    //     if (prevProps.changedProp !== this.props.changedProp) {\n    //         this.setState({\n    //             changedProp: this.props.changedProp\n    //         });\n    //     }\n    // }\n    componentDidMount() {\n        this.setState({ accounts: this.props.web3.accounts });\n        window.ethereum.on('accountsChanged', (acc) => {\n            this.setState({ accounts: acc })\n            this.setState({ isRootAuth: false });\n            this.setState({ isMidAuth: false });\n            this.setState({ isNoAuth: false });\n            if (this.props.web3.contract != null) {\n                this.call();\n            }\n        })\n    }\n    call() {\n        labels = [\n\n        ]\n\n        mapAuthAddresstoName = {}\n        const { contract } = this.props.web3;\n        console.log(contract);\n\n\n        contract.methods.getAllListedAuthAddress().call({ from: this.state.accounts[0], gas: 3000000 })\n            .then((result) => {\n\n                let i;\n                console.log(result);\n                let promises = [];\n                for (i = 0; i < result.length; i++) {\n                    let temp = result[i];\n\n                    let add = this.state.accounts[0]\n                    promises.push(new Promise(function (resolve, reject) {\n                        console.log(temp);\n                        contract.methods.getSingleAuthDetails(temp).call({ from: add, gas: 3000000 })\n                            .then((r) => {\n                                console.log(r);\n                                labels.push({ 'value': r['name'] })\n                                mapAuthAddresstoName[temp.toLowerCase()] = r['name'];\n                            }).then(() => {\n                                resolve();\n                            })\n\n                    }))\n                }\n                Promise.all(promises).then(() => {\n                    console.log(this.state.accounts[0].toLowerCase());\n                    console.log(mapAuthAddresstoName);\n                    if (mapAuthAddresstoName[this.state.accounts[0].toLowerCase()] == 'Root') {\n                        this.setState({ isRootAuth: true });\n\n                    }\n                    else if (mapAuthAddresstoName.hasOwnProperty(this.state.accounts[0].toLowerCase())) {\n                        console.log('midauth');\n                        this.setState({ isMidAuth: true });\n                        this.setState({ midAuthName: mapAuthAddresstoName[this.state.accounts[0].toLowerCase()] })\n                    }\n                    else {\n                        this.setState({ isNoAuth: true });\n                    }\n                });\n\n            });\n    };\n\n    handleToggleDrawer = (bool) => {\n        this.setState({ drawerVisible: bool });\n    }\n    handleChangeMenu = (key) => {\n        this.handleToggleDrawer(false);\n        this.setState({ selectedMenuItem: key });\n        if (key == '0') this.setState({ campaignName: '' });\n    }\n    liveCampClicked = (name, owner) => {\n        this.setState({ selectedMenuItem: '2', campaignName: name, drawerVisible: false });\n        console.log(this.props.web3);\n        const w = this.props.web3.web3;\n        const instance = new w.eth.Contract(Paaradarshak.abi, owner);\n        this.props.web3.contract = instance;\n        this.setState({ contract: instance });\n        this.setState({ isRootAuth: false });\n        this.setState({ isMidAuth: false });\n        this.setState({ isNoAuth: false });\n        this.call();\n    }\n\n    render() {\n        return (\n            <Layout className=\"home\">\n                <Header className=\"header\">\n                    <MenuOutlined className=\"menu-unfold\" type=\"default\" onClick={() => this.handleToggleDrawer(true)} />\n                    <div>{this.state.campaignName != '' ? this.state.campaignName : 'Paaradarshak'}</div>\n                    <Menu className=\"desktop-menu\" theme=\"dark\" mode=\"horizontal\" selectedKeys={[this.state.selectedMenuItem]}>\n                        {this.state.selectedMenuItem !== '0' ? AppMenuMapper.map((obj) => {\n                            if (parseInt(obj.key) < 5 && parseInt(obj.key) != 1)\n                                return <Menu.Item onClick={() => this.handleChangeMenu(obj.key)} key={obj.key}>{obj.value}</Menu.Item>\n                            else if (parseInt(obj.key) == 1 && !this.state.isNoAuth)\n                                return <Menu.Item onClick={() => this.handleChangeMenu(obj.key)} key={obj.key}>{obj.value}</Menu.Item>\n\n                        }) :\n                            LandingMenuMapper.map((obj) => {\n                                return <Menu.Item key={obj.key}><a target='_blank' href={obj.link}>{obj.value}</a></Menu.Item>\n                            })}\n                    </Menu>\n                </Header>\n                <Drawer title=\"Welcome, User\"\n                    placement=\"left\"\n                    closable={true}\n                    onClose={() => this.handleToggleDrawer(false)}\n                    visible={this.state.drawerVisible}>\n                    <Menu\n                        style={{ width: 256 }}\n                        selectedKeys={[this.state.selectedMenuItem]}\n                        mode=\"inline\"\n                        theme=\"light\">\n                        {this.state.selectedMenuItem !== '0' ? AppMenuMapper.map((obj) => {\n                            if (parseInt(obj.key) < 5)\n                                return <Menu.Item onClick={() => this.handleChangeMenu(obj.key)} key={obj.key} icon={obj.icon}>\n                                    {obj.value}\n                                </Menu.Item>\n                            else if (parseInt(obj.key) == 1 && !this.state.isNoAuth)\n                                return <Menu.Item onClick={() => this.handleChangeMenu(obj.key)} key={obj.key}>{obj.value}</Menu.Item>\n\n                        }) : LandingMenuMapper.map((obj) => {\n                            return <Menu.Item key={obj.key}><a target='_blank' href={obj.link}>{obj.value}</a></Menu.Item>\n                        })}\n                    </Menu>\n                </Drawer>\n                {this.state.selectedMenuItem == '0' ? <Landing liveCampClicked={this.liveCampClicked} web3={this.props.web3} /> :\n                    this.state.selectedMenuItem == '1' && this.state.isRootAuth ? <RootAuth handleChangeMenu={this.handleChangeMenu} web3={this.props.web3} acc={this.state.accounts} /> :\n                        this.state.selectedMenuItem == '1' && this.state.isMidAuth ? <MidAuth midAuthName={this.state.midAuthName} web3={this.props.web3} acc={this.state.accounts} /> :\n                            this.state.selectedMenuItem == '3' ? <Tree web3={this.props.web3} /> :\n                                this.state.selectedMenuItem == '2' ? <Campaign web3={this.props.web3} /> :\n                                    this.state.selectedMenuItem == '4' ? <Track web3={this.props.web3} /> :\n                                        this.state.selectedMenuItem == '5' ? <RootAuth web3={this.props.web3} labels={this.state.labels} /> :\n                                            this.state.selectedMenuItem == '6' ? <MidAuth web3={this.props.web3} labels={this.state.labels} /> :\n                                                <div></div>}\n            </Layout>\n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}